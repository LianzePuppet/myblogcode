y<-y[which(y$confirmed>=3000),]#µÃµ½ÀÛ¼ÆÈ·Õï´óÓÚ3000µÄ¹ú¼ÒÁĞ±í
country<-x[which(x$id%in%y$id&x$confirmed>=1000),]#xÖĞ»ñÈ¡ÕâĞ©¹ú¼ÒÒÔ¼°È·Õï´ïµ½Ò»Ç§µÄĞĞ
country<-as.data.frame(country)
country<-country[,c(2,4,28)]
j<-ggplot(country,aes(x=date,y=confirmed,group=administrative_area_level_1))+
geom_line()+
geom_label(data=subset(country,date=="2020-05-31"),aes(date,confirmed,label=administrative_area_level_1))+
scale_y_continuous(breaks=c(0),labels=c(1000))+
labs(title="¸÷¹úÈ·ÕïÈËÊıËæÊ±¼äÀÛ¼Æ",x="date",y="confirmed")
#Í¨¹ıforÑ­»·»­Í¼
x <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
y<-x[which(x$date=="2020-05-31"),]#»ñÈ¡½ØÖÁ2020Äê5ÔÂ31ÈÕµÄ¸÷¹ú×ÜÈ·ÕïÈËÊıÍ³¼ÆÁĞ±í
y<-y[which(y$confirmed>=3000),]#µÃµ½ÀÛ¼ÆÈ·Õï´óÓÚ3000µÄ¹ú¼ÒÁĞ±í
country<-x[which(x$id%in%y$id&x$confirmed>=1000),]#xÖĞ»ñÈ¡ÕâĞ©¹ú¼ÒÒÔ¼°È·Õï´ïµ½Ò»Ç§µÄĞĞ
country<-country[,c(2,4,28)]
country<-as.data.frame(country)
j<-ggplot(country,aes(x=date,y=confirmed,color=administrative_area_level_1))+
geom_line()+
geom_label(data=subset(country,date=="2020-05-31"),aes(date,confirmed,label=administrative_area_level_1))+
scale_y_continuous(breaks=c(0),labels=c(1000))+
labs(title="¸÷¹úÈ·ÕïÈËÊıËæÊ±¼äÀÛ¼Æ",x="date",y="confirmed")
#Í¨¹ıforÑ­»·»­Í¼
View(country)
x <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
y<-x[which(x$date=="2020-05-31"),]#»ñÈ¡½ØÖÁ2020Äê5ÔÂ31ÈÕµÄ¸÷¹ú×ÜÈ·ÕïÈËÊıÍ³¼ÆÁĞ±í
y<-y[which(y$confirmed>=3000),]#µÃµ½ÀÛ¼ÆÈ·Õï´óÓÚ3000µÄ¹ú¼ÒÁĞ±í
country<-x[which(x$id%in%y$id&x$confirmed>=1000),]#xÖĞ»ñÈ¡ÕâĞ©¹ú¼ÒÒÔ¼°È·Õï´ïµ½Ò»Ç§µÄĞĞ
country<-country[,c(2,4,28)]
country<-as.data.frame(country)
j<-ggplot(country,aes(x=date,y=confirmed,color=administrative_area_level_1))+
geom_line()+
geom_label(data=subset(country,date=="2020-05-31"),aes(date,confirmed,label=administrative_area_level_1))+
scale_y_continuous(breaks=c(0),labels=c(1000))+
labs(title="¸÷¹úÈ·ÕïÈËÊıËæÊ±¼äÀÛ¼Æ",x="date",y="confirmed")
x <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
y<-x[which(x$date=="2020-05-31"),]#»ñÈ¡½ØÖÁ2020Äê5ÔÂ31ÈÕµÄ¸÷¹ú×ÜÈ·ÕïÈËÊıÍ³¼ÆÁĞ±í
y<-y[which(y$confirmed>=3000),]#µÃµ½ÀÛ¼ÆÈ·Õï´óÓÚ3000µÄ¹ú¼ÒÁĞ±í
country<-x[which(x$id%in%y$id&x$confirmed>=1000),]#xÖĞ»ñÈ¡ÕâĞ©¹ú¼ÒÒÔ¼°È·Õï´ïµ½Ò»Ç§µÄĞĞ
country<-country[,c(2,4,28)]
country<-as.data.frame(country)
j<-ggplot(country,aes(x=date,y=confirmed,color=administrative_area_level_1))+
geom_line()+
geom_label(data=subset(country,date=="2020-05-31"),aes(date,confirmed,label=administrative_area_level_1))+
scale_y_continuous(breaks=c(0),labels=c(1000))+
labs(title="¸÷¹úÈ·ÕïÈËÊıËæÊ±¼äÀÛ¼Æ",x="date",y="confirmed")
x$administrative_area_level_1
x <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
y<-x[which(x$date=="2020-05-31"),]#»ñÈ¡½ØÖÁ2020Äê5ÔÂ31ÈÕµÄ¸÷¹ú×ÜÈ·ÕïÈËÊıÍ³¼ÆÁĞ±í
y<-y[which(y$confirmed>=3000),]#µÃµ½ÀÛ¼ÆÈ·Õï´óÓÚ3000µÄ¹ú¼ÒÁĞ±í
country<-x[which(x$id%in%y$id&x$confirmed>=1000),]#xÖĞ»ñÈ¡ÕâĞ©¹ú¼ÒÒÔ¼°È·Õï´ïµ½Ò»Ç§µÄĞĞ
country<-country[,c(2,4,28)]
country<-as.data.frame(country)
j<-ggplot(country,aes(x=date,y=confirmed,color=administrative_area_level_1))+
geom_line()+
geom_label(data=subset(country,date=="2020-05-31"),aes(date,confirmed,label=administrative_area_level_1))+
scale_y_continuous(breaks=c(0),labels=c(1000))+
labs(title="¸÷¹úÈ·ÕïÈËÊıËæÊ±¼äÀÛ¼Æ",x="date",y="confirmed")
x <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
y<-x[which(x$date=="2020-05-31"),]#»ñÈ¡½ØÖÁ2020Äê5ÔÂ31ÈÕµÄ¸÷¹ú×ÜÈ·ÕïÈËÊıÍ³¼ÆÁĞ±í
y<-y[which(y$confirmed>=3000),]#µÃµ½ÀÛ¼ÆÈ·Õï´óÓÚ3000µÄ¹ú¼ÒÁĞ±í
country<-x[which(x$id%in%y$id&x$confirmed>=1000),]#xÖĞ»ñÈ¡ÕâĞ©¹ú¼ÒÒÔ¼°È·Õï´ïµ½Ò»Ç§µÄĞĞ
country<-country[,c(2,4,28)]
country<-as.data.frame(country)
j<-ggplot(country,aes(x=date,y=confirmed,color=administrative_area_level_1))+#ÊäÈëcountryÊı¾İ£¬xÖáÎªdate£¬yÖáÎªÈ·ÕïÈËÊı£¬°´ÕÕµÚÒ»µ¥Î»Ò²¾ÍÊÇ¹ú¼Ò·Ö×é
geom_line()+#»­Ïß
geom_label(data=subset(country,date=="2020-05-31"),aes(date,confirmed,label=administrative_area_level_1))+#
scale_y_continuous(breaks=c(0),labels=c(1000))+
labs(title="¸÷¹úÈ·ÕïÈËÊıËæÊ±¼äÀÛ¼Æ",x="date",y="confirmed")
View(country)
#c)
#¶Ô±ÈÖĞ¹úºÍÃÀ¹úµÄÈ·Õï²¡Àı
china <- covid19(country = "CHN", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china<-aggregate(china[,4],by=china[,2],sum)#Í¨¹ıaggregateº¯Êı½«¸÷Ê¡Ã¿ÈÕµÄÊı¾İ°´Ğè½øĞĞºÏ²¢£¬µÃµ½È«¹úÍ³Ò»Êı¾İ
usa <- covid19(country = "USA")  # »ñÈ¡ÃÀ¹úÊı¾İ
dev.new()
plot(x=china$date,y=china$confirmed,pch=15,type='l',col=2,ylim=c(0,2000000),main="COVID19 confirmed in CHN and USA",xlab="date",ylab="cofirmed")
lines(x=usa$date,y=usa$confirmed,pch=17,type='l',col=4,ylim=c(0,2000000))
legend("topright",inset=.05,title="Country",c("CHINA","USA"),col=c(2,4),pch=c(15,17))
#²é¿´ÖĞ¹úºÍÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
#²é¿´ÖĞ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
china <- covid19(country = "CHN", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china<-china[which(china$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
n<-33#Ò»¹²ÓĞ33¸öÊ¡
colors<-brewer.pal(n,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(china$confirmed) <- c(china$administrative_area_level_2)
barplot(china$confirmed,ylab="confirmed",main="ÖĞ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
#²é¿´ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
usa <- covid19(country = "USA", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
usa<-usa[which(usa$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
p<-56#ÃÀ¹úÒ»¹²ÓĞ56¸öÖİ
colors<-brewer.pal(p,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(usa$confirmed) <- c(usa$administrative_area_level_2)
barplot(usa$confirmed,ylab="confirmed",main="ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
#¶Ô±ÈÖĞ¹úºÍÃÀ¹úµÄÈ·Õï²¡Àı
china <- covid19(country = "CHN", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china<-aggregate(china[,4],by=china[,2],sum)#Í¨¹ıaggregateº¯Êı½«¸÷Ê¡Ã¿ÈÕµÄÊı¾İ°´Ğè½øĞĞºÏ²¢£¬µÃµ½È«¹úÍ³Ò»Êı¾İ
usa <- covid19(country = "USA")  # »ñÈ¡ÃÀ¹úÊı¾İ
dev.new()
plot(x=china$date,y=china$confirmed,pch=15,type='l',col=2,ylim=c(0,2000000),main="COVID19 confirmed in CHN and USA",xlab="date",ylab="cofirmed")
lines(x=usa$date,y=usa$confirmed,pch=17,type='l',col=4,ylim=c(0,2000000))
legend("topright",inset=.05,title="Country",c("CHINA","USA"),col=c(2,4),pch=c(15,17))
#²é¿´ÖĞ¹úºÍÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
#²é¿´ÖĞ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
china <- covid19(country = "CHN", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china<-china[which(china$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
n<-33#Ò»¹²ÓĞ33¸öÊ¡
colors<-brewer.pal(n,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(china$confirmed) <- c(china$administrative_area_level_2)
barplot(china$confirmed,ylab="confirmed",main="ÖĞ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
#²é¿´ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
usa <- covid19(country = "USA", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
usa<-usa[which(usa$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
p<-56#ÃÀ¹úÒ»¹²ÓĞ56¸öÖİ
colors<-brewer.pal(p,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(usa$confirmed) <- c(usa$administrative_area_level_2)
barplot(usa$confirmed,ylab="confirmed",main="ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
#²é¿´ÖĞ¹úºÍÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
#²é¿´ÖĞ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
china <- covid19(country = "CHN", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china<-china[which(china$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
n<-33#Ò»¹²ÓĞ33¸öÊ¡
colors<-brewer.pal(n,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(china$confirmed) <- c(china$administrative_area_level_2)
barplot(china$confirmed,ylab="confirmed",main="ÖĞ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
#²é¿´ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı
usa <- covid19(country = "USA", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
usa<-usa[which(usa$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
p<-56#ÃÀ¹úÒ»¹²ÓĞ56¸öÖİ
colors<-brewer.pal(p,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(usa$confirmed) <- c(usa$administrative_area_level_2)
barplot(usa$confirmed,ylab="confirmed",main="ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
usa <- covid19(country = "USA", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
usa<-usa[which(usa$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
p<-56#ÃÀ¹úÒ»¹²ÓĞ56¸öÖİ
colors<-brewer.pal(p,"Set1")
par(las=3,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(usa$confirmed) <- c(usa$administrative_area_level_2)
barplot(usa$confirmed,ylab="confirmed",main="ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
usa <- covid19(country = "USA", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
usa<-usa[which(usa$date=="2020-05-31"),]
#install.packages("RColorBrewer")
#°²×°RColorBrewer°ü£¬ÎªºóÃæbarplot±äÉ«×ö×¼±¸
library(RColorBrewer)
p<-56#ÃÀ¹úÒ»¹²ÓĞ56¸öÖİ
colors<-brewer.pal(p,"Set1")
par(las=2,oma=c(6,0,0,0))#Ê¹Ã¿Ò»¸öÊ¡·İ×İÏòÕ¹Ê¾£¬¿ÉÒÔÈ«²¿³ÊÏÖ³öÀ´
names(usa$confirmed) <- c(usa$administrative_area_level_2)
barplot(usa$confirmed,ylab="confirmed",main="ÃÀ¹ú¸÷¸öÊ¡µÄÀÛ¼ÆÈ·ÕïÈËÊı",col=colors)
shapiro.test(x$rate)#¼ìÑéÊÇ·ñ·ş´ÓÕıÌ¬·Ö²¼
#d)
library(COVID19)
usa <- covid19(country = "USA", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china <- covid19(country = "CHN", level = 2)  # »ñÈ¡ÖĞ¹ú¸÷Ê¡¶ş¼¶Êı¾İ
china<-china[which(china$date=="2020-05-31"),]
china_recovered_rate<-sum(china$recovered)/sum(china$confirmed)# ½ØÖ¹ÖÁ5ÔÂ31ÈÕÖĞ¹úµÄÖÎÓúÂÊÎª0.9434673
x <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
x<-x[which(x$date=="2020-05-31"),]#»ñÈ¡½ØÖÁ2020Äê5ÔÂ31ÈÕµÄ¸÷¹ú×ÜÈ·ÕïÈËÊıÍ³¼ÆÁĞ±í
x<-x[-8,]#ÈËÎª¹Û²ìµ½µÚ°ËĞĞidÎª"ASM"µÄ¹ú¼ÒÈ·ÕïÈËÊıÎª0£¬ÓèÒÔÈË¹¤É¾³ı
for(i in 1:nrow(x)){
x$rate[i]=x$recovered[i]/x$confirmed[i]
}
t.test(x$rate,mu=china_recovered_rate)#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
shapiro.test(x$rate)#¼ìÑéÊÇ·ñ·ş´ÓÕıÌ¬·Ö²¼
t.test(x$rate,mu=china_recovered_rate alternative"greater")#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
t.test(x$rate,mu=china_recovered_rate alternative="greater")#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
t.test(x$rate,mu=china_recovered_rate,alternative="greater")#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
mean(x$rate)
x$rate
t.test(x$rate,mu=china_recovered_rate,alternative="greater")#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
t.test(x$rate,mu=china_recovered_rate,alternative="lower")#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
t.test(x$rate,mu=china_recovered_rate,alternative="less")#¼ìÑéÊÇ·ñÓĞÏÔÖø²îÒì
x2 <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
result<-c()
unique_id<-unique(x2$id)   #´¢´æÕâĞ©¹ú¼ÒµÄid
#µÃµ½ÈÕĞÂÔöÈËÊı
daily<-rep(0,nrow(x2))#³õÊ¼»¯daily¿ÕÏòÁ¿
x2<-data.frame(x2,daily)#½«dailyºÏ²¢µ½xÊı¾İ¿òÖĞÈ¥
for(i in 1:(nrow(x2)-1)){#¶ÔÓÚÃ¿Ò»ĞĞ½øĞĞ±éÀú
x2$daily[1]=x2$confirmed[1]#ĞÂµÄÁĞ¡°daily_conf¡±À´´¢´æÃ¿ÈÕĞÂÔö
x2$daily[i+1]=x2$confirmed[i+1]-x2$confirmed[i]
if(x2$daily[i+1]<0){#¶ÔÓÚÒÑ¾­¿çidµÄÆğÊ¼ÈÕÆÚĞĞ
x2$daily[i+1]=x2$confirmed[i+1]#»¹ÊÇµÈÓÚ¸Ã¹ú¼ÒµÚÒ»ÌìµÄconfirmed
}#ifÑ­»·
}#iµÄÑ­»·
#ÈÕĞÂÔöÈËÊıÌí¼ÓÍê±Ï
n<-0
for(i in 1:length(unique_id)){#±éÀúÃ¿Ò»¸ö¹ú¼Ò
k<-x2[which(x2$id==unique_id[i]),]#ÏÈ°ÑÃ¿Ò»¸öidµÄĞĞÌáÈ¡³öÀ´
count=0
max=k$daily[1]
for(j in 1:(nrow(k)-1)){#¶ÔÓÚÃ¿Ò»¸ö¹ú¼ÒµÄÃ¿Ò»ÌìµÄÊı¾İ
if(k$daily[j]>k$daily[j+1]){
count<-count+1
print(count)
max=k$confirmed[j]
}#ifÑ­»·µÄ½áÎ²
if(k$daily[j]<=k$daily[j+1]){
max=k$daily[j+1]
count=0
}
if(count=="7"&(k$daily[j]<=1/3*(max))){
result<-rbind(result,k[j,])
print("you made it")
}
}#Ã¿Ò»ÌìÊı¾İ
}#Ã¿Ò»¸ö¹ú¼ÒµÄÑ­»·
View(result)
#µÃµ½ÈÕĞÂÔöÈËÊı
daily<-rep(0,nrow(x2))#³õÊ¼»¯daily¿ÕÏòÁ¿
x2<-data.frame(x2,daily)#½«dailyºÏ²¢µ½xÊı¾İ¿òÖĞÈ¥
for(i in 1:(nrow(x2)-1)){#¶ÔÓÚÃ¿Ò»ĞĞ½øĞĞ±éÀú
x2$daily[1]=x2$confirmed[1]#ĞÂµÄÁĞ¡°daily_conf¡±À´´¢´æÃ¿ÈÕĞÂÔö
x2$daily[i+1]=x2$confirmed[i+1]-x2$confirmed[i]
if(x2$daily[i+1]<0){#¶ÔÓÚÒÑ¾­¿çidµÄÆğÊ¼ÈÕÆÚĞĞ
x2$daily[i+1]=x2$confirmed[i+1]#»¹ÊÇµÈÓÚ¸Ã¹ú¼ÒµÚÒ»ÌìµÄconfirmed
}#ifÑ­»·
}#iµÄÑ­»·
#ÈÕĞÂÔöÈËÊıÌí¼ÓÍê±Ï
n<-0
for(i in 1:length(unique_id)){#±éÀúÃ¿Ò»¸ö¹ú¼Ò
k<-x2[which(x2$id==unique_id[i]),]#ÏÈ°ÑÃ¿Ò»¸öidµÄĞĞÌáÈ¡³öÀ´
count=0
max=k$daily[1]
for(j in 1:(nrow(k)-1)){#¶ÔÓÚÃ¿Ò»¸ö¹ú¼ÒµÄÃ¿Ò»ÌìµÄÊı¾İ
if(k$daily[j]>k$daily[j+1]){#Í¨¹ıÃ¿Ò»ÌìÓëÏÂÒ»Ìì½øĞĞ±È½ÏµÃµ½
count<-count+1
max=k$confirmed[j]
}#ifÑ­»·µÄ½áÎ²
if(k$daily[j]<=k$daily[j+1]){
max=k$daily[j+1]
count=0
}
if(count=="7"&(k$daily[j+1]<=1/3*(max))){
result<-rbind(result,k[j+1,])#½«·ûºÏÒªÇóµÄĞĞ
}
}#Ã¿Ò»ÌìÊı¾İ
}#Ã¿Ò»¸ö¹ú¼ÒµÄÑ­»·
#µÃµ½ÈÕĞÂÔöÈËÊı
daily<-rep(0,nrow(x2))#³õÊ¼»¯daily¿ÕÏòÁ¿
x2<-data.frame(x2,daily)#½«dailyºÏ²¢µ½xÊı¾İ¿òÖĞÈ¥
for(i in 1:(nrow(x2)-1)){#¶ÔÓÚÃ¿Ò»ĞĞ½øĞĞ±éÀú
x2$daily[1]=x2$confirmed[1]#ĞÂµÄÁĞ¡°daily_conf¡±À´´¢´æÃ¿ÈÕĞÂÔö
x2$daily[i+1]=x2$confirmed[i+1]-x2$confirmed[i]
if(x2$daily[i+1]<0){#¶ÔÓÚÒÑ¾­¿çidµÄÆğÊ¼ÈÕÆÚĞĞ
x2$daily[i+1]=x2$confirmed[i+1]#»¹ÊÇµÈÓÚ¸Ã¹ú¼ÒµÚÒ»ÌìµÄconfirmed
}#ifÑ­»·
}#iµÄÑ­»·
#ÈÕĞÂÔöÈËÊıÌí¼ÓÍê±Ï
n<-0
for(i in 1:length(unique_id)){#±éÀúÃ¿Ò»¸ö¹ú¼Ò
k<-x2[which(x2$id==unique_id[i]),]#ÏÈ°ÑÃ¿Ò»¸öidµÄĞĞÌáÈ¡³öÀ´
count=0
max=k$daily[1]
for(j in 1:(nrow(k)-1)){#¶ÔÓÚÃ¿Ò»¸ö¹ú¼ÒµÄÃ¿Ò»ÌìµÄÊı¾İ
if(k$daily[j]>k$daily[j+1]){#Í¨¹ıÃ¿Ò»ÌìÓëÏÂÒ»Ìì½øĞĞ±È½ÏµÃµ½
count<-count+1
max=k$confirmed[j]
}#ifÑ­»·µÄ½áÎ²
if(k$daily[j]<=k$daily[j+1]){
max=k$daily[j+1]
count=0
}#Èç¹ûËµÔÚcount´ïµ½7µÄ¹ı³ÌÖĞÍ»È»ÓĞÔö³¤µÄÇ÷ÊÆ¡£countÇåÁã
if(count=="7"&(k$daily[j+1]<=1/3*(max))){
result<-rbind(result,k[j+1,])#½«·ûºÏÒªÇóµÄĞĞ
}
}#Ã¿Ò»ÌìÊı¾İ
}#Ã¿Ò»¸ö¹ú¼ÒµÄÑ­»·
View(result)#²é¿´ÕÒ³öµÄ½á¹ûdaily<-rep(0,nrow(x2))#³õÊ¼»¯daily¿ÕÏòÁ¿
x2<-data.frame(x2,daily)#½«dailyºÏ²¢µ½xÊı¾İ¿òÖĞÈ¥
for(i in 1:(nrow(x2)-1)){#¶ÔÓÚÃ¿Ò»ĞĞ½øĞĞ±éÀú
x2$daily[1]=x2$confirmed[1]#ĞÂµÄÁĞ¡°daily_conf¡±À´´¢´æÃ¿ÈÕĞÂÔö
x2$daily[i+1]=x2$confirmed[i+1]-x2$confirmed[i]
if(x2$daily[i+1]<0){#¶ÔÓÚÒÑ¾­¿çidµÄÆğÊ¼ÈÕÆÚĞĞ
x2$daily[i+1]=x2$confirmed[i+1]#»¹ÊÇµÈÓÚ¸Ã¹ú¼ÒµÚÒ»ÌìµÄconfirmed
}#ifÑ­»·
}#iµÄÑ­»·
#ÈÕĞÂÔöÈËÊıÌí¼ÓÍê±Ï
n<-0
for(i in 1:length(unique_id)){#±éÀúÃ¿Ò»¸ö¹ú¼Ò
k<-x2[which(x2$id==unique_id[i]),]#ÏÈ°ÑÃ¿Ò»¸öidµÄĞĞÌáÈ¡³öÀ´
count=0
max=k$daily[1]
for(j in 1:(nrow(k)-1)){#¶ÔÓÚÃ¿Ò»¸ö¹ú¼ÒµÄÃ¿Ò»ÌìµÄÊı¾İ
if(k$daily[j]>k$daily[j+1]){#Í¨¹ıÃ¿Ò»ÌìÓëÏÂÒ»Ìì½øĞĞ±È½ÏµÃµ½
count<-count+1
max=k$confirmed[j]
}#ifÑ­»·µÄ½áÎ²
if(k$daily[j]<=k$daily[j+1]){
max=k$daily[j+1]
count=0
}#Èç¹ûËµÔÚcount´ïµ½7µÄ¹ı³ÌÖĞÍ»È»ÓĞÔö³¤µÄÇ÷ÊÆ¡£countÇåÁã
if(count=="7"&(k$daily[j+1]<=1/3*(max))){
result<-rbind(result,k[(j+1),])#½«·ûºÏÒªÇóµÄĞĞ
}
}#Ã¿Ò»ÌìÊı¾İ
}#Ã¿Ò»¸ö¹ú¼ÒµÄÑ­»·
View(result)#²é¿´ÕÒ³öµÄ½á¹û
daily<-rep(0,nrow(x2))#³õÊ¼»¯daily¿ÕÏòÁ¿
x2<-data.frame(x2,daily)#½«dailyºÏ²¢µ½xÊı¾İ¿òÖĞÈ¥
for(i in 1:(nrow(x2)-1)){#¶ÔÓÚÃ¿Ò»ĞĞ½øĞĞ±éÀú
x2$daily[1]=x2$confirmed[1]#ĞÂµÄÁĞ¡°daily_conf¡±À´´¢´æÃ¿ÈÕĞÂÔö
x2$daily[i+1]=x2$confirmed[i+1]-x2$confirmed[i]
if(x2$daily[i+1]<0){#¶ÔÓÚÒÑ¾­¿çidµÄÆğÊ¼ÈÕÆÚĞĞ
x2$daily[i+1]=x2$confirmed[i+1]#»¹ÊÇµÈÓÚ¸Ã¹ú¼ÒµÚÒ»ÌìµÄconfirmed
}#ifÑ­»·
}#iµÄÑ­»·
#ÈÕĞÂÔöÈËÊıÌí¼ÓÍê±Ï
n<-0
for(i in 1:length(unique_id)){#±éÀúÃ¿Ò»¸ö¹ú¼Ò
k<-x2[which(x2$id==unique_id[i]),]#ÏÈ°ÑÃ¿Ò»¸öidµÄĞĞÌáÈ¡³öÀ´
count=0
max=k$daily[1]
for(j in 1:(nrow(k)-1)){#¶ÔÓÚÃ¿Ò»¸ö¹ú¼ÒµÄÃ¿Ò»ÌìµÄÊı¾İ
if(k$daily[j]>k$daily[j+1]){#Í¨¹ıÃ¿Ò»ÌìÓëÏÂÒ»Ìì½øĞĞ±È½ÏµÃµ½
count<-count+1
max=k$confirmed[j]
}#ifÑ­»·µÄ½áÎ²
if(k$daily[j]<=k$daily[j+1]){
max=k$daily[j+1]
count=0
}#Èç¹ûËµÔÚcount´ïµ½7µÄ¹ı³ÌÖĞÍ»È»ÓĞÔö³¤µÄÇ÷ÊÆ¡£countÇåÁã
if(count=="7"&(k$daily[j+1]<=1/3*(max))){
result<-rbind(result,k[(j+1),])#½«·ûºÏÒªÇóµÄĞĞ
}
}#Ã¿Ò»ÌìÊı¾İ
}#Ã¿Ò»¸ö¹ú¼ÒµÄÑ­»·
View(result)#²é¿´ÕÒ³öµÄ½á¹û
#e)
x2 <- covid19() # »ñÈ¡È«ÊÀ½ç¸÷¹úµÄÊı¾İ
result<-c()
unique_id<-unique(x2$id)   #´¢´æÕâĞ©¹ú¼ÒµÄid
#µÃµ½ÈÕĞÂÔöÈËÊı
daily<-rep(0,nrow(x2))#³õÊ¼»¯daily¿ÕÏòÁ¿
x2<-data.frame(x2,daily)#½«dailyºÏ²¢µ½xÊı¾İ¿òÖĞÈ¥
for(i in 1:(nrow(x2)-1)){#¶ÔÓÚÃ¿Ò»ĞĞ½øĞĞ±éÀú
x2$daily[1]=x2$confirmed[1]#ĞÂµÄÁĞ¡°daily_conf¡±À´´¢´æÃ¿ÈÕĞÂÔö
x2$daily[i+1]=x2$confirmed[i+1]-x2$confirmed[i]
if(x2$daily[i+1]<0){#¶ÔÓÚÒÑ¾­¿çidµÄÆğÊ¼ÈÕÆÚĞĞ
x2$daily[i+1]=x2$confirmed[i+1]#»¹ÊÇµÈÓÚ¸Ã¹ú¼ÒµÚÒ»ÌìµÄconfirmed
}#ifÑ­»·
}#iµÄÑ­»·
#ÈÕĞÂÔöÈËÊıÌí¼ÓÍê±Ï
n<-0
for(i in 1:length(unique_id)){#±éÀúÃ¿Ò»¸ö¹ú¼Ò
k<-x2[which(x2$id==unique_id[i]),]#ÏÈ°ÑÃ¿Ò»¸öidµÄĞĞÌáÈ¡³öÀ´
count=0
max=k$daily[1]
for(j in 1:(nrow(k)-1)){#¶ÔÓÚÃ¿Ò»¸ö¹ú¼ÒµÄÃ¿Ò»ÌìµÄÊı¾İ
if(k$daily[j]>k$daily[j+1]){#Í¨¹ıÃ¿Ò»ÌìÓëÏÂÒ»Ìì½øĞĞ±È½ÏµÃµ½
count<-count+1
max=k$confirmed[j]
}#ifÑ­»·µÄ½áÎ²
if(k$daily[j]<=k$daily[j+1]){
max=k$daily[j+1]
count=0
}#Èç¹ûËµÔÚcount´ïµ½7µÄ¹ı³ÌÖĞÍ»È»ÓĞÔö³¤µÄÇ÷ÊÆ¡£countÇåÁã
if(count=="7"&(k$daily[j+1]<=1/3*(max))){
result<-rbind(result,k[(j+1),])#½«·ûºÏÒªÇóµÄĞĞ
}
}#Ã¿Ò»ÌìÊı¾İ
}#Ã¿Ò»¸ö¹ú¼ÒµÄÑ­»·
View(result)#²é¿´ÕÒ³öµÄ½á¹û
result
View(result)
View(result[2,28])#²é¿´ÕÒ³öµÄ½á¹û
View(result[,c(2,28)])#²é¿´ÕÒ³öµÄ½á¹û
q()
install.packages('c("devtools","roxygen2","testthat","knitr")')
library('devtools')
create('D://RåŒ…æµ‹è¯•//dqd')
create('D://RåŒ…æµ‹è¯•//dqd')
setwd(D://RåŒ…æµ‹è¯•//dqd)
setwd('D://RåŒ…æµ‹è¯•//dqd')
getwd
dir()
load_all()
document()
build()
library(dqd)
Fibonacci(3)
fibonacci(3)
Fibonacci(3)
Fibonacci(3)
fibonacci(1)
Fibonacci(1)
load_all()#è½½å…¥
document()
build()æ‰“åŒ…
load_all()
load_all()#è½½å…¥
document()
build()æ‰“åŒ…
buildï¼ˆï¼‰#æ‰“åŒ…
build()#æ‰“åŒ…
library(dqd)
factorialdqd(3)
dqd.factorialdqd(3)
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
factorialdqd(3)
Fibonacci = function(n){
if (x ==1 || x == 2){
return(1)
}
if (x !=1 & x != 2)
{
return(Fibonacci(x-1) + Fibonacci(x-2))
}
}
Fibonacci(3)
factorialdqd(2)
print("hello,world!")
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
library(dqd)
helloworlddqd()
library(clusterProfiler)
library(clusterProfilter)
BiocManager:: install(c("DOSE","topGO","clusterProfiler","pathview","org.Hs.eg.db"))
n
library(clusterProfilter)
library(clusterProfiler)
bitr
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
library(dqd)
MyGeneSet <-c("AASDH","ABCB11","ADAM12","ADAMTS16","ADAMTS18")
MyGeneIDSet = bitr(MyGeneSet,
fromType="SYMBOL", # input format is "symbol"
toType="ENTREZID", # output format is "ENTERZID
OrgDb="org.Hs.eg.db") #Use human data
nstall.packages(Needed, repos = 'https://mirrors.tuna.tsinghua.edu.cn/CRAN')
BiocManager:: install(c("DOSE","topGO","clusterProfiler","pathview","org.Hs.eg.db"))
BiocManager::install(version = "3.11")
MyGeneSet <-c("AASDH","ABCB11","ADAM12","ADAMTS16","ADAMTS18")
MyGeneIDSet = bitr(MyGeneSet,
fromType="SYMBOL", # input format is "symbol"
toType="ENTREZID", # output format is "ENTERZID
OrgDb="org.Hs.eg.db") #Use human data
MyGeneSet <-c("AASDH","ABCB11","ADAM12","ADAMTS16","ADAMTS18")
MyGeneIDSet = bitr(MyGeneSet,
fromType="SYMBOL", # input format is "symbol"
toType="ENTREZID", # output format is "ENTERZID
OrgDb="org.Hs.eg.db") #Use human data
pacman::p_load(DOSE, topGO, clusterProfiler,pathview,org.Hs.eg.db) #å¦‚æœå…¶ä¸­æœ‰åŒ…æœªå®‰è£…ï¼Œåˆ™è¯¥æ¡å‘½ä»¤ä¼šå®‰è£…å¹¶åŠ è½½å®ƒ
keytypes(org.Hs.eg.db)
MyGeneIDSet = bitr(MyGeneSet,
fromType="SYMBOL", # input format is "symbol"
toType="ENTREZID", # output format is "ENTERZID
OrgDb="org.Hs.eg.db") #Use human data
MyGeneIDSet = bitr(MyGeneSet,
fromType="SYMBOL", # input format is "symbol"
toType="ENTREZID", # output format is "ENTERZID
OrgDb="org.Hs.eg.db") #Use human data
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
library(dqd)
Fibonaccidqd(3)
Fibonaccidqd(100)
library(clusterProfiler)
bitr
factorial
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
library(dqd)
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
library(dqd)
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
load_all()#è½½å…¥
document()
build()#æ‰“åŒ…
library(dqd)
factorialdqd(4)
factorialdqd(4)
factorialdqd(6)
factorial
